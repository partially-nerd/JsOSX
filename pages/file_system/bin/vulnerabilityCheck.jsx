const fs = require("fs");

function escape(str) {
    return (str + '').replace(/[\\"']/g, '\\$&').replace(/\u0000/g, '\\0');
}

module.exports = (dir) => {
    let status = 0;
    let stdout = "";
    dir = "/Users/avinavchalise/Programs/ASM/notes.md";
    // if (!fs.existsSync(dir)) stdout = `<span class='err'>Error:</span> ${dir} doesn't exist`;
    // else{
    //     if (fs.statSync(dir).isDirectory()) stdout = `<span class='err'>Error:</span> ${dir} is a directory`;
    //     else {
    //         status = 1;
    //         stdout = escape(fs.readFileSync(dir, {encoding: "utf-8"}));
    //     }
    // }
    stdout = escape(fs.readFileSync(dir, {encoding: "utf-8"}));
    return /*html*/ `<div class='stdout status-${status}'>${stdout}</div>`;
};
